---
title: "Astro & TinaCMSのHero画像のビルドエラー"
emoji: "😺"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: [Astro, TinaCMS]
published: true
---

# Astro にTinaCMSでHero画像を追加するとビルドエラーが発生する

エラーの内容は、なぜか画像のパスが`http://localhost:4321/images/example.jpg`のように
ベースURLが`http://localhost:4321`になってしまうことで、ビルド時にパスが正しくないので画像が見つからないというエラーが発生していました。

以下のように`Astro.url.origin`としているので、ビルド時は`http://example.com`になると思っていたのですが、なぜか`http://localhost:4321`になってしまいました。
```ts
const imageUrl = post.image ? (post.image.startsWith('http') ? post.image : `${Astro.url.origin}${post.image}`) : '';

```

## 解決方法
ひとまず私が行った解決方法は、`Astro.url.origin`を使わずに、サイトのURLを直接指定する方法です…。
```ts
const site ='example.com';
const imageUrl = post.image ? (post.image.startsWith('http') ? post.image : `${site}${post.image}`) : '';
```
