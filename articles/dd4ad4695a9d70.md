---
title: "Astroã§ç”»åƒã®ãƒ‘ã‚¹ã§ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼"
emoji: "ğŸ˜º"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [Astro, TinaCMS, CloudflarePages]
published: true
---

# Astroã®ãƒ–ãƒ­ã‚°ã‚µã‚¤ãƒˆã«TinaCMSã§Heroç”»åƒã‚’è¿½åŠ ã™ã‚‹ã¨ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹

ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°å…ˆã¯Cloudflare Pagesã‚’ä½¿ã£ã¦ã„ã¦ã€ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã¨å•é¡Œãªãè¡¨ç¤ºã•ã‚Œã‚‹ã®ã§ã™ãŒã€Cloudflare Pagesã«ãƒ“ãƒ«ãƒ‰æ™‚ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚

ã‚¨ãƒ©ãƒ¼ã®å†…å®¹ã¯ã€ç”»åƒã®ãƒ‘ã‚¹ãŒ`http://localhost:4321/images/example.jpg`ã®ã‚ˆã†ã«
ãƒ™ãƒ¼ã‚¹URLãŒ`http://localhost:4321`ã«ãªã£ã¦ã—ã¾ã„ã¾ã™ã€‚ãƒ‘ã‚¹ãŒæ­£ã—ããªã„ã®ã§ç”»åƒãŒè¦‹ã¤ã‹ã‚‰ãªã„ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ã§ã™ã€‚

ä»¥ä¸‹ã®ã‚ˆã†ã«`Astro.url.origin`ã¨ã—ã¦ã„ã‚‹ã®ã§ã€ãƒ“ãƒ«ãƒ‰æ™‚ã¯`http://example.com`ã«ãªã‚‹ã¨æ€ã£ã¦ã„ãŸã®ã§ã™ãŒã€`http://localhost:4321`ã«ãªã£ã¦ã—ã¾ã„ã¾ã™ã€‚
```ts
const imageUrl = post.image ? (post.image.startsWith('http') ? post.image : `${Astro.url.origin}${post.image}`) : '';
```

### ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ä¸€éƒ¨ã§ã™
```
21:14:47.400	12:14:47   â””â”€ /category/work/index.html[FailedToFetchRemoteImageDimensions] Failed to get the dimensions for http://localhost:4321/images/the_beach.jpg.
21:14:47.400	  Hint:
21:14:47.400	    Verify your remote image URL is accurate, and that you are not using `inferSize` with a file located in your `public/` folder.
21:14:47.401	  Error reference:
21:14:47.401	    https://docs.astro.build/en/reference/errors/failed-to-fetch-remote-image-dimensions/
21:14:47.401	  Stack trace:
21:14:47.401	    at getImage$1 (file:///opt/buildhome/repo/dist/chunks/_astro_assets_DUW25etl.mjs:82:13)
21:14:47.401	    at async getImage (file:///opt/buildhome/repo/dist/chunks/_astro_assets_DUW25etl.mjs:214:42)
21:14:47.401	    at async Promise.all (index 0)
21:14:47.401	    at async file:///opt/buildhome/repo/dist/chunks/Image_DpOlw8AW.mjs:272:13
21:14:47.458	Failed: Error while executing user command. Exited with error code: 1
21:14:47.469	Failed: build command exited with code: 1
```

## è§£æ±ºæ–¹æ³•
ã²ã¨ã¾ãšè¡Œã£ãŸè§£æ±ºæ–¹æ³•ã¯ã€`Astro.url.origin`ã‚’ä½¿ã‚ãšã«ã€ã‚µã‚¤ãƒˆã®URLã‚’ç›´æ¥æŒ‡å®šã™ã‚‹æ–¹æ³•ã§ã™â€¦ã€‚
```ts
const site ='example.com';
const imageUrl = post.image ? (post.image.startsWith('http') ? post.image : `${site}${post.image}`) : '';
```
